{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  var flattenFileList = [];\n  var progressFileList = [];\n  files.forEach(function (file) {\n    return progressFileList.push(file.webkitGetAsEntry());\n  });\n  function loopFiles(item) {\n    var dirReader = item.createReader();\n    function sequence() {\n      dirReader.readEntries(function (entries) {\n        var entryList = Array.prototype.slice.apply(entries);\n        progressFileList.push.apply(progressFileList, _toConsumableArray(entryList));\n        // Check if all the file has been viewed\n        var isFinished = !entryList.length;\n        if (!isFinished) {\n          sequence();\n        }\n      });\n    }\n    sequence();\n  }\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    if (!item) {\n      return;\n    }\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            });\n            // eslint-disable-next-line no-param-reassign\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n          flattenFileList.push(file);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item);\n    }\n  };\n  function walkFiles() {\n    var wipIndex = 0;\n    while (wipIndex < progressFileList.length) {\n      _traverseFileTree(progressFileList[wipIndex]);\n      wipIndex++;\n    }\n    callback(flattenFileList);\n  }\n  walkFiles();\n};\nexport default traverseFileTree;","map":{"version":3,"names":["_toConsumableArray","traverseFileTree","files","callback","isAccepted","flattenFileList","progressFileList","forEach","file","push","webkitGetAsEntry","loopFiles","item","dirReader","createReader","sequence","readEntries","entries","entryList","Array","prototype","slice","apply","isFinished","length","_traverseFileTree","path","isFile","fullPath","webkitRelativePath","Object","defineProperties","writable","replace","isDirectory","walkFiles","wipIndex"],"sources":["/home/levi/Development/book-club/client/node_modules/rc-upload/es/traverseFileTree.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  var flattenFileList = [];\n  var progressFileList = [];\n  files.forEach(function (file) {\n    return progressFileList.push(file.webkitGetAsEntry());\n  });\n  function loopFiles(item) {\n    var dirReader = item.createReader();\n    function sequence() {\n      dirReader.readEntries(function (entries) {\n        var entryList = Array.prototype.slice.apply(entries);\n        progressFileList.push.apply(progressFileList, _toConsumableArray(entryList));\n        // Check if all the file has been viewed\n        var isFinished = !entryList.length;\n        if (!isFinished) {\n          sequence();\n        }\n      });\n    }\n    sequence();\n  }\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    if (!item) {\n      return;\n    }\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            });\n            // eslint-disable-next-line no-param-reassign\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n          flattenFileList.push(file);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item);\n    }\n  };\n  function walkFiles() {\n    var wipIndex = 0;\n    while (wipIndex < progressFileList.length) {\n      _traverseFileTree(progressFileList[wipIndex]);\n      wipIndex++;\n    }\n    callback(flattenFileList);\n  }\n  walkFiles();\n};\nexport default traverseFileTree;"],"mappings":"AAAA,OAAOA,kBAAkB,MAAM,8CAA8C;AAC7E,IAAIC,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,UAAU,EAAE;EAC5E,IAAIC,eAAe,GAAG,EAAE;EACxB,IAAIC,gBAAgB,GAAG,EAAE;EACzBJ,KAAK,CAACK,OAAO,CAAC,UAAUC,IAAI,EAAE;IAC5B,OAAOF,gBAAgB,CAACG,IAAI,CAACD,IAAI,CAACE,gBAAgB,CAAC,CAAC,CAAC;EACvD,CAAC,CAAC;EACF,SAASC,SAASA,CAACC,IAAI,EAAE;IACvB,IAAIC,SAAS,GAAGD,IAAI,CAACE,YAAY,CAAC,CAAC;IACnC,SAASC,QAAQA,CAAA,EAAG;MAClBF,SAAS,CAACG,WAAW,CAAC,UAAUC,OAAO,EAAE;QACvC,IAAIC,SAAS,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,KAAK,CAACL,OAAO,CAAC;QACpDX,gBAAgB,CAACG,IAAI,CAACa,KAAK,CAAChB,gBAAgB,EAAEN,kBAAkB,CAACkB,SAAS,CAAC,CAAC;QAC5E;QACA,IAAIK,UAAU,GAAG,CAACL,SAAS,CAACM,MAAM;QAClC,IAAI,CAACD,UAAU,EAAE;UACfR,QAAQ,CAAC,CAAC;QACZ;MACF,CAAC,CAAC;IACJ;IACAA,QAAQ,CAAC,CAAC;EACZ;EACA;EACA,IAAIU,iBAAiB,GAAG,SAASA,iBAAiBA,CAACb,IAAI,EAAEc,IAAI,EAAE;IAC7D,IAAI,CAACd,IAAI,EAAE;MACT;IACF;IACA;IACAA,IAAI,CAACc,IAAI,GAAGA,IAAI,IAAI,EAAE;IACtB,IAAId,IAAI,CAACe,MAAM,EAAE;MACff,IAAI,CAACJ,IAAI,CAAC,UAAUA,IAAI,EAAE;QACxB,IAAIJ,UAAU,CAACI,IAAI,CAAC,EAAE;UACpB;UACA,IAAII,IAAI,CAACgB,QAAQ,IAAI,CAACpB,IAAI,CAACqB,kBAAkB,EAAE;YAC7CC,MAAM,CAACC,gBAAgB,CAACvB,IAAI,EAAE;cAC5BqB,kBAAkB,EAAE;gBAClBG,QAAQ,EAAE;cACZ;YACF,CAAC,CAAC;YACF;YACAxB,IAAI,CAACqB,kBAAkB,GAAGjB,IAAI,CAACgB,QAAQ,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;YAC1DH,MAAM,CAACC,gBAAgB,CAACvB,IAAI,EAAE;cAC5BqB,kBAAkB,EAAE;gBAClBG,QAAQ,EAAE;cACZ;YACF,CAAC,CAAC;UACJ;UACA3B,eAAe,CAACI,IAAI,CAACD,IAAI,CAAC;QAC5B;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAII,IAAI,CAACsB,WAAW,EAAE;MAC3BvB,SAAS,CAACC,IAAI,CAAC;IACjB;EACF,CAAC;EACD,SAASuB,SAASA,CAAA,EAAG;IACnB,IAAIC,QAAQ,GAAG,CAAC;IAChB,OAAOA,QAAQ,GAAG9B,gBAAgB,CAACkB,MAAM,EAAE;MACzCC,iBAAiB,CAACnB,gBAAgB,CAAC8B,QAAQ,CAAC,CAAC;MAC7CA,QAAQ,EAAE;IACZ;IACAjC,QAAQ,CAACE,eAAe,CAAC;EAC3B;EACA8B,SAAS,CAAC,CAAC;AACb,CAAC;AACD,eAAelC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}